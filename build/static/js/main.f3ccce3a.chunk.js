(this.webpackJsonptinder=this.webpackJsonptinder||[]).push([[0],{105:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),c=a(31),o=a.n(c),i=(a(73),a(74),a(22)),l=a(66),s=a(20),u=a(26),d=a.n(u),h=a(40),g=a.n(h);function f(e){return function(){return console.log(e)}}function m(e){var t=e.name,a=e.image,n=e.rightClick,c=e.leftClick,o=e.hide;return r.a.createElement("div",{className:d.a.container},r.a.createElement("div",{className:d.a.card},r.a.createElement("img",{alt:"rick",src:a}),r.a.createElement("p",{className:d.a.name},t),!o&&r.a.createElement("div",{className:d.a.actions},r.a.createElement("div",{onClick:c||f("left"),className:d.a.left},r.a.createElement(g.a,{name:"thumbs-down",size:"2x"})),r.a.createElement("div",{onClick:n||f("right"),className:d.a.right},r.a.createElement(g.a,{name:"heart",size:"2x"})))))}m.defaultProps={name:"Rick Sanches",image:"https://rickandmortyapi.com/api/character/avatar/1.jpeg"};var p=a(32),v=a.n(p),E=a(16),O=a(33),y=a(18),b=a(10),_=(a(80),a(27)),A=a.n(_);a(97),a(99);A.a.initializeApp({apiKey:"AIzaSyAdJqmdvKke5vHO4KohIcftvqO2Hc5O7I4",authDomain:"react-redux-graphql-test.firebaseapp.com",databaseURL:"https://react-redux-graphql-test.firebaseio.com",projectId:"react-redux-graphql-test",storageBucket:"react-redux-graphql-test.appspot.com",messagingSenderId:"715549641202",appId:"1:715549641202:web:67688164d77364be50436b",measurementId:"G-E71TYQMXJH"});var j=A.a.firestore().collection("favs");var S=a(23);function C(){var e=Object(O.a)(["\n        query ($pake:Int){\n            characters(page:$pake){\n            info{\n                pages\n                next\n                prev\n            }\n            results{\n                name\n                image\n            }\n            }\n        }\n    "]);return C=function(){return e},e}var I={fetching:!1,charsArr:[],current:{},favorites:[],nextPage:1},k=new S.a({uri:"https://rickandmortyapi.com/graphql"}),N="GET_CHARACTERS",R="GET_CHARACTERS_SUCCESS",T="GET_CHARACTERS_ERROR",x="REMOVE_CHARACTER",G="ADD_TO_FAVORITES",w="GET_FAVS",L="GET_FAVS_SUCCESS",q="GET_FAVS_ERROR",F="GET_FAVS_LOCALE",P="UPDATE_PAGE";var U=function(){return function(e){var t=localStorage.getItem("storage");(t=JSON.parse(t))&&t.user&&e({type:F,payload:t.characters.favorites})}},H=function(){return function(e,t){return e({type:w}),function(e){return j.doc(e).get().then((function(e){return e.data().favoritos}))}(t().user.uid).then((function(t){return e({type:L,payload:Object(y.a)(t)})})).catch((function(t){console.log(t),e({type:q,payload:t.message})}))}},J=function(){return function(e,t){var a=Object(S.b)(C());e({type:N});var n=t().characters.nextPage;return k.query({query:a,variables:{pake:n}}).then((function(t){e({type:R,payload:t.data.characters.results}),e({type:P,payload:t.data.characters.info.next?t.data.characters.info.next:1})})).catch((function(t){return e({type:T,payload:t})}))}},V=Object(E.b)((function(e){return{chars:e.characters.charsArr}}),{removeCharacterAction:function(){return function(e,t){var a=t().characters.charsArr;a.shift(),a.length||J()(e,t),e({type:x,payload:Object(y.a)(a)})}},addToFavsAction:function(){return function(e,t){var a=t().characters,n=a.charsArr,r=a.favorites,c=t().user.uid,o=n.shift();r.push(o),function(e,t){j.doc(t).set({favoritos:Object(y.a)(e)})}(r,c),e({type:G,payload:{charsArr:Object(y.a)(n),favorites:Object(y.a)(r)}})}}})((function(e){var t=e.chars,a=e.removeCharacterAction,n=e.addToFavsAction,c=function(){a()},o=function(){n()};return r.a.createElement("div",{className:v.a.container},r.a.createElement("h2",null,"Personajes de Rick y Morty"),r.a.createElement("div",null,function(){var e=t[0];return r.a.createElement(m,Object.assign({leftClick:c,rightClick:o},e))}()))})),D=a(60),M=a.n(D);var z=Object(E.b)((function(e){return{characters:e.characters.favorites}}))((function(e){var t=e.characters,a=void 0===t?[0]:t;return r.a.createElement("div",{className:M.a.container},r.a.createElement("h2",null,"Favoritos"),a.map((function(e,t){return r.a.createElement(m,Object.assign({hide:!0},e,{key:t}))})),!a.length&&r.a.createElement("h3",null,"No hay personajes agregados"))})),B=a(61),K=a.n(B),W="LOGIN",X="LOGIN_SUCCESS",$="LOGIN_SUCCESS_LOCALE",Y="LOGIN_ERROR",Q="LOGOUT",Z={fetching:!1,loggedIn:!1};var ee=function(){return function(e){var t=localStorage.getItem("storage");(t=JSON.parse(t))&&t.user&&e({type:$,payload:t.user})}},te=Object(E.b)((function(e){var t=e.user;return{fetching:t.fetching,loggedIn:t.loggedIn}}),{doGoogleLoginAction:function(){return function(e,t){return e({type:W}),function(){var e=new A.a.auth.GoogleAuthProvider;return A.a.auth().signInWithPopup(e).then((function(e){return e.user}))}().then((function(t){e({type:X,payload:{uid:t.uid,displayName:t.displayName,email:t.email,photoURL:t.photoURL}})})).then((function(a){return H()(e,t)})).then((function(e){return a=t(),void(localStorage.storage=JSON.stringify(a));var a})).catch((function(t){console.log(t),e({type:Y,payload:t.message})}))}},logOutAction:function(){return function(e,t){A.a.auth().signOut(),e({type:Q}),localStorage.removeItem("storage")}}})((function(e){var t=e.fetching,a=e.loggedIn,n=e.doGoogleLoginAction,c=e.logOutAction;return t?r.a.createElement("h2",null,"cargando"):r.a.createElement("div",{className:K.a.container},a?r.a.createElement("h1",null,"Cierra tu sesi\xf3n"):r.a.createElement("h1",null,"Inicia Sesi\xf3n con Google"),a?r.a.createElement("button",{onClick:function(){c()}},"Cerrar Sesi\xf3n"):r.a.createElement("button",{onClick:function(){n()}},"Iniciar"))}));a(65),a(107);function ae(e){var t=e.loggedIn,a=e.component,n=e.path,c=Object(l.a)(e,["loggedIn","component","path"]);return t?r.a.createElement(s.b,Object.assign({path:n,component:a},c)):r.a.createElement(s.a,Object.assign({to:"/login"},c))}var ne=Object(E.b)((function(e){return{loggedIn:e.user.loggedIn}}))((function(e){var t=e.loggedIn;return r.a.createElement(s.d,null,r.a.createElement(ae,{exact:!0,path:"/",component:V,loggedIn:t}),r.a.createElement(ae,{path:"/favs",component:z,loggedIn:t}),r.a.createElement(s.b,{path:"/login",component:te}))}));var re=function(){return r.a.createElement("div",null,r.a.createElement("div",{className:"nav-bar"},r.a.createElement(i.b,{className:"link",activeClassName:"active",exact:!0,to:"/"},"Inicio"),r.a.createElement(i.b,{className:"link",activeClassName:"active",to:"/favs"},"Favoritos"),r.a.createElement(i.b,{className:"link",activeClassName:"active",to:"/login"},"Login")),r.a.createElement(ne,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(104);var ce=a(24),oe=a(64),ie=Object(ce.c)({user:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Z,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case W:return Object(b.a)({},e,{fetching:!0});case X:case $:return Object(b.a)({},e,{fetching:!1,loggedIn:!0},t.payload);case Y:return Object(b.a)({},e,{fetching:!1,error:t.payload});case Q:return Object(b.a)({},Z);default:return e}},characters:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:I,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case N:return Object(b.a)({},e,{fetching:!0});case T:return Object(b.a)({},e,{fetching:!1,error:t.payload});case R:return Object(b.a)({},e,{charsArr:t.payload,fetching:!1});case x:return Object(b.a)({},e,{charsArr:t.payload});case G:return Object(b.a)({},e,{},t.payload);case w:return Object(b.a)({},e,{fetching:!0});case q:return Object(b.a)({},e,{fetching:!1,error:t.payload});case L:return Object(b.a)({},e,{favorites:t.payload,fetching:!1});case F:return Object(b.a)({},e,{fetching:!1,favorites:t.payload});case P:return Object(b.a)({},e,{nextPage:t.payload});default:return e}}}),le=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||ce.d;var se=a(11),ue=function(){var e=Object(ce.e)(ie,le(Object(ce.a)(oe.a)));return J()(e.dispatch,e.getState),ee()(e.dispatch),U()(e.dispatch),e}(),de=new S.a({uri:"https://rickandmortyapi.com/graphql"}),he=function(){return r.a.createElement(i.a,null,r.a.createElement(re,null))},ge=function(){return r.a.createElement(E.a,{store:ue},r.a.createElement(he,null))};o.a.render(r.a.createElement((function(){return r.a.createElement(se.a,{client:de}," ",r.a.createElement(ge,null))}),null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},26:function(e,t,a){e.exports={container:"card_container__3G4Fa",card:"card_card__1py-W",name:"card_name__31aE7",actions:"card_actions__31KML",left:"card_left__kmFAA",right:"card_right__ikHyB"}},32:function(e,t,a){e.exports={container:"home_container__2grJ2"}},60:function(e,t,a){e.exports={container:"favs_container__1T6OY"}},61:function(e,t,a){e.exports={container:"login_container__2teO8"}},68:function(e,t,a){e.exports=a(105)},73:function(e,t,a){},74:function(e,t,a){}},[[68,1,2]]]);
//# sourceMappingURL=main.f3ccce3a.chunk.js.map